export const boundaryAnalysisPrompt = (
  requirementDoc: string,
  requirementSummary: string,
  requirementGlossary: string
) => `
目前在进行撰写和优化需求文档

目标需要处理的需求文档的内容（markdown格式）如下:
${requirementDoc}

需求文档相关的历史需求文档摘要如下（json格式，一行一个文档摘要）
${requirementSummary}

需求文档相关的术语如下（json格式，一行一个术语）：
${requirementGlossary}

请针对目标需求文档，结合上下文，使用准确的产品思维逻辑进行全面的边界case识别，并特别关注以下几个方面：

**核心目标：围绕需求文档中已描述的功能和规则，识别可能存在的、但尚未被充分考虑或描述清晰的边界情况。**

**分析维度：**

1.  **功能模块覆盖与用户操作路径：**
    * 针对需求文档中的每一个功能模块，**重点分析其核心功能和关键业务流程**，识别在这些功能和流程中可能存在的边界case。
    * 考虑用户在使用这些功能时，各种正常、异常以及**不符合预期**的操作路径，分析可能出现的边界情况。

2.  **功能规则与条件检查（参考提供的边界分析规则）：**
    * **规则条件不明确：** 检查需求中涉及的规则、条件是否明确完整，是否遗漏了关键条件项。针对不明确或可能遗漏的条件，补充识别相应的边界case。
    * **规则条件的补充case：** 针对需求中已有的规则条件，分析当这些条件不成立时，或者多个条件组合下可能出现的各种 Happy、Sad 和 Negative Case。
    * **规则边界值和极限值：** 分析需求中涉及的数值、状态等规则，识别当这些规则处于默认值、边界值、临界值或极限值时可能出现的边界case。
    * **逆向或反向操作：** 分析需求中的操作步骤，考虑用户没有按预定顺序操作、中途取消、回退等逆向或反向操作时可能出现的边界case。

3.  **系统稳定性与数据一致性：**
    * 重点关注可能影响系统稳定性的边界case，例如网络异常、服务中断、资源不足、极端并发等情况下的处理机制。
    * 分析涉及数据交互和存储的功能，识别可能导致数据不一致的边界case，例如多端同步、数据异常值、数据迁移等。

4.  **用户体验细节与极端场景：**
    * 从用户体验的角度出发，考虑用户在各种临界状态或异常情况下可能遇到的问题，例如加载超时、错误提示不友好、操作无响应等。
    * 识别可能出现的极端场景，例如数据量过大、用户操作过于频繁、输入内容超出限制等情况。

5.  **性能与安全性（如果需求文档涉及）：**
    * 如果需求文档涉及性能要求，请分析可能影响性能的边界case，例如大数据处理、复杂计算等。
    * 如果需求文档涉及安全性，请考虑可能存在的安全漏洞和攻击场景，例如未授权访问、数据泄露等。

6.  **结合术语：**
    * 务必结合提供的术语表，更准确地理解需求，识别与特定术语相关的边界case。

7.  **历史经验借鉴（基于相关的历史需求文档摘要）：**
    * 仔细分析提供的文档摘要，识别历史需求中曾经重点关注的边界情况、反复出现的问题、以及前人总结的关键经验。
    * 将你在历史需求摘要中发现的关键点与当前的目标需求文档进行对比和关联。
    * 对于在历史需求中被提及的边界case或需要特别注意的问题，请优先在当前需求文档的分析中进行考虑和“借鉴”。


请务必遵循以下输出格式，围绕需求文档中的功能模块展开分析，并针对每个功能模块从上述不同维度进行深入分析（先不用考虑处理建议，只聚焦深入分析边界情况）

**输出格式示例 ：**

**一、[功能模块名称1]**

1.  **[具体功能点1]**
    * **功能边界case (重点分析，基于需求描述):**
        * [边界情况描述 1]  ([简要说明影响或处理建议])
        * [边界情况描述 2]  ([简要说明影响或处理建议])
        * ...
        * **示例 (参考提供的规则):** 客户在跟机器人交互时新增图片发送功能，如果图片格式不支持，如何处理？
    * **非功能边界分析 (如果适用):**
        * **稳定性考量:** [分析该边界case对系统稳定性的潜在影响]
          * [边界情况描述 1]  ([简要说明影响或处理建议])
          * ...
        * **数据一致性考量:** [分析该边界case对数据一致性的潜在影响]
          * [边界情况描述 1]  ([简要说明影响或处理建议])
          * ...
        * **用户体验与极端场景考量:** [分析该边界case对用户体验的潜在影响]
          * [边界情况描述 1]  ([简要说明影响或处理建议])
          * ...
        * **性能与安全考量:** [分析该边界case对性能与安全的潜在影响]
          * [边界情况描述 1]  ([简要说明影响或处理建议])
          * ...
    * **历史经验借鉴 (如果适用):**
        * [引用历史文档摘要中的相关信息分析可能存在的边界情况]
        * ...

2.  **[具体功能点2]**
    * **功能边界case (重点分析，基于需求描述):**
        * [边界情况描述 1]  ([简要说明影响或处理建议])
        * ...
        * **示例 (参考提供的规则):** 每讲一篇故事消耗聊天次数，如果讲故事请求未成功或中途停止，是否消耗聊天次数？
    * **历史经验借鉴 (如果适用):**
        * [引用历史文档摘要中的相关信息分析可能存在的边界情况]

**二、[功能模块名称2]**

1.  **[具体功能点1]**
    * **功能边界case (重点分析，基于需求描述):**
        * [边界情况描述 1]  ([简要说明影响或处理建议])
        * **稳定性考量:** [分析该边界case对系统稳定性的潜在影响]
          * [边界情况描述 1]  ([简要说明影响或处理建议])
          * ...

... (以此类推，覆盖所有功能模块)
` 